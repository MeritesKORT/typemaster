   {% extends 'typetester/base.html' %}

{% block title %}–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ - TypeMaster{% endblock %}

{% block content %}
<div style="max-width: 1000px; margin: 0 auto;">
    <h1 style="text-align: center; margin-bottom: 2rem; color: #333;">
        <i class="fas fa-trophy"></i> –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤
    </h1>
    
    <div style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 3rem; flex-wrap: wrap;">
        <div style="background: white; padding: 1.5rem; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 1.2rem; color: #666;">–í—Å–µ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</div>
            <div style="font-size: 2.5rem; font-weight: bold; color: #4a6cf7;">{{ total_users }}</div>
        </div>
        <div style="background: white; padding: 1.5rem; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 1.2rem; color: #666;">–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤</div>
            <div style="font-size: 2.5rem; font-weight: bold; color: #4a6cf7;">{{ total_tests }}</div>
        </div>
        <div style="background: white; padding: 1.5rem; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 1.2rem; color: #666;">–°—Ä–µ–¥–Ω–∏–π WPM</div>
            <div style="font-size: 2.5rem; font-weight: bold; color: #4a6cf7;">{{ avg_wpm }}</div>
        </div>
        <div style="background: white; padding: 1.5rem; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 1.2rem; color: #666;">–†–µ–∫–æ—Ä–¥ WPM</div>
            <div style="font-size: 2.5rem; font-weight: bold; color: #4a6cf7;">{{ max_wpm }}</div>
        </div>
    </div>
    
    <div style="background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.1);">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #4a6cf7; color: white;">
                    <th style="padding: 1rem; text-align: left;">#</th>
                    <th style="padding: 1rem; text-align: left;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                    <th style="padding: 1rem; text-align: left;">WPM</th>
                    <th style="padding: 1rem; text-align: left;">–¢–æ—á–Ω–æ—Å—Ç—å</th>
                    <th style="padding: 1rem; text-align: left;">–í—Ä–µ–º—è</th>
                    <th style="padding: 1rem; text-align: left;">–î–∞—Ç–∞</th>
                </tr>
            </thead>
            <tbody>
                {% for result in results %}
                {% if forloop.counter <= 3 %}
                <tr style="border-bottom: 1px solid #eee; background: #fff9e6;">
                {% else %}
                <tr style="border-bottom: 1px solid #eee;">
                {% endif %}
                    <td style="padding: 1rem;">
                        {% if forloop.counter == 1 %}
                            <span style="color: gold; font-size: 1.2rem;">ü•á</span>
                        {% elif forloop.counter == 2 %}
                            <span style="color: silver; font-size: 1.2rem;">ü•à</span>
                        {% elif forloop.counter == 3 %}
                            <span style="color: #cd7f32; font-size: 1.2rem;">ü•â</span>
                        {% else %}
                            {{ forloop.counter }}
                        {% endif %}
                    </td>
                    <td style="padding: 1rem;">
                        {% if result.user %}
                            {{ result.user.username }}
                        {% else %}
                            –ê–Ω–æ–Ω–∏–º
                        {% endif %}
                    </td>
                    <td style="padding: 1rem; font-weight: bold; color: #4a6cf7;">
                        {{ result.wpm }}
                    </td>
                    <td style="padding: 1rem;">
                        {{ result.accuracy }}%
                    </td>
                    <td style="padding: 1rem;">
                        {{ result.time_seconds }} —Å–µ–∫
                    </td>
                    <td style="padding: 1rem; color: #666;">
                        {{ result.created_at|date:"d.m.Y H:i" }}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" style="padding: 2rem; text-align: center; color: #666;">
                        –ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div style="text-align: center; margin-top: 3rem;">
        <a href="{% url 'typing_test' %}?difficulty=medium" class="btn" style="font-size: 1.1rem; padding: 1rem 2rem;">
            <i class="fas fa-keyboard"></i> –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ç–µ—Å—Ç
        </a>
        {% if user.is_authenticated %}
        <a href="{% url 'my_results' %}" class="btn btn-secondary" style="margin-left: 1rem;">
            <i class="fas fa-chart-line"></i> –ú–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        </a>
        {% endif %}
    </div>
</div>
{% endblock %}